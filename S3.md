## S3

Objects stored in a region. Accessible from anywhere from world. Unlimited storage.

#### Availability

Multiple copies in multiple AZz. 

#### Consistency

Till 2020: String read after write consistenyc for new objects. Eventual consistency for deletes and updates. In 2021, Strong consistency for all operations. A subsequent read will get lastest operation.

#### Bucket Object ownership

Bucket owner and object owner can be in different accounts(cross-accounts). Till 2020, bucket owner cannot access object, until object owner grant access using ACL.
After 2021, we can disbale ACL and bucket owner can take ownership of all objects. 

#### S3 Storage Classes


- Standard
   - Only pay for storage. **No retrieval fee.**. There is retrieval fee for all other class. **No minimum days** charge.
- Infrequent Access : Minimum 30 days. 128 KB.
- OneZone IA: Minimum 30 days. 128 KB. Ideal for secondary backup or easily recreatable data.
- Glacier Instant Retrieval : Immediate Access. Minimum 90 days. 128 KB.
- Glacier Flexible Retrieval : Several minutes to hours to retrieve. Minimum 90 days. 40 KB.
      * Expediate and Standard(5 hours) and Bulk(12 hours)
- Glacier Deep Archieve : Several Hours to retrieve. Minimum 180 days. 40 KB.
      * Standard(12 hours) and Bulk(48 hours)

S3 Intelligent Tiering: Automatically change class based on usage. \
 - Suitable for unknown accessible patterns or changing patterns
 - Each object is tracked and transitioned between storage classes independently
 - Objcet must be minimum 128 kb
 - Small monitoring fee
 - Optinally enable deep archieve class
 - Minimun storage charge for 30 days
Life Cycle Configuration: Define rules based on age. 
 - When u know usage pattern
 - For CloudTrailLogs
 - Configure expiration

Storage Class Analysis \
Storage Lens

#### Versioning

By default , updates and deletes are not reversible.

Enabled at bucket level

If version1 is 10GB, version2 is 12GB, even if you delete, u need to pay for 22GB. (Delete will add a delete marker, will not delete actual v1 and v2 data.)

Get operation returns current version. \
If u have a delete marker,then GET will return NOT FOUND. \
Delete without version --> will add delete marker. \
Delete with version --> delete actual version. \
Delete the delete marker --> will restore the old object version \
To restore a version --> Get a version and put it as new version \
Life cycle rules can be configured for versions

#### Life cycle rules

Filter by prefix, tags

Tiering, Expiration, For current and previous versins,
